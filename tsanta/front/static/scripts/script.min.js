function validateEmail(e){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}function changeUni(e){var a=serializeForm(e),s=ge("se-results"),n="",r=[];return""==a.vuz.trim()?(e.vuz.focus(),!1):(a.vuz.length>=2&&$.post("ajax.php",{act:"search",text:a.vuz},function(e,a){return"success"==a?(console.log(e),r=parseJSON(e),r.length>0?(n+="<h3>Уточним ВУЗ:</h3>",each(r,function(e,a){n+="<a class='search-results' href='"+a.way+"'>"+a.ans+"</a>"})):n="Ой ой ой!<br>Тайный Санта доберется до Вас уже в следующем году",s.style.display="block",s.innerHTML=n,!1):void 0}),!1)}function recipient(e){var a=serializeForm(e),s=ge("se-results"),n="";return""==a.email.trim()?(e.email.focus(),!1):validateEmail(a.email)?($.post("ajax.php",{act:"recipient",email:a.email},function(e,a){return"success"==a?(console.log(e),n=parseJSON(e),s.innerHTML=n,!1):void 0}),!1):(e.email.focus(),!1)}function santa(e){var a=serializeForm(e),s=ge("se-results"),n="";return""==a.email.trim()?(e.email.focus(),!1):validateEmail(a.email)?($.post("ajax.php",{act:"santa",email:a.email},function(e,a){return"success"==a?(console.log(e),n=parseJSON(e),"not"==n?(s.style.display="block",s.innerHTML="<h2 style='text-align:center;'>Ошибочка! Наверное, вы не подтверждали участие.</h2>"):n&&(s.style.display="block",s.innerHTML="<h2 style='text-align:center;'>Ваш Тайный Санта:</h2><b>"+n.name+" "+n.surname+"</b><br><p><b><a href='"+n.vk+"'>"+n.name+" в VK</a></b></p>"),console.log(n),!1):void 0}),!1):(e.email.focus(),!1)}function saveForm(e){for(var a=serializeForm(e),s=[e.name,e.surname,e.sex,e.email,e.phone,e.vk,e.interests,e.inpresent,e.present],n=0,r=0;r<=s.length-1;r++)if(0==s[r].value||""==s[r])return s[r].focus(),!1;return validateEmail(e.email.value)?(use_ajax||(use_ajax=!0,e.but.innerHTML="Загрузка...",$.post("ajax.php",a,function(e,a){return"success"==a?(console.log(e),use_ajax=!1,n=parseJSON(e),200==n?document.location.href="thanks":ajax.error("Ошибка загрузки содержимого."),!1):void 0})),!1):(e.email.focus(),!1)}var use_ajax=!1;